<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Join</title>

    <link rel="stylesheet" href="./style/fonts.css" />
    <link rel="stylesheet" href="./style/board.css" />
    <link rel="stylesheet" href="./style/add_task.css" />

    <script src="./js/array.js"></script>
    <script src="./js/board.js"></script>
    <script src="js/add_task_scripts/help_functions.js"></script>
    <script src="js/add_task_scripts/add_task_templates.js"></script>
    <script src="js/add_task_scripts/priorities.js"></script>
    <script src="js/add_task_scripts/get_values.js"></script>
    <script src="js/add_task_scripts/subtask_handling.js"></script>
    <script src="js/contacts.js"></script>
    <script src="./assets/templates/template.js"></script>
    <script src="./js/add_task_scripts/clear_values.js"></script>
    <script src="js/add_task_scripts/add_task.js"></script>

    <link rel="stylesheet" href="./assets/templates/templates.css">
    <script src="./assets/templates/template.js"></script>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="./assets/favicon/site.webmanifest">

</head>

<body onload="init(), loadBoard()">

    <div class="mainAddTaksContainer hidden" id="animationDiv">
        <div id="transition">
            <form class="add-tasks" onsubmit="createTask(event)">
                <div>
                    <h1 class="content-title">Add Task</h1>
                    <button id="closeAddTaksButton" onclick="addDnonToAddTaks()">X</button>
                    <section class="task-forms">
                        <div class="forms-sides">
                            <div class="form-div">
                                <span class="form-span required-asteriks">Title</span>
                                <div class="form-subcontainer">
                                    <input id="task-title-input" maxlength="48" class="task-title-input" type="text"
                                        placeholder="Enter a title" required />
                                    <p class="input-required-warning">This field is required</p>
                                </div>
                            </div>

                            <div class="form-div">
                                <span class="form-span">Description</span>
                                <div class="form-subcontainer">
                                    <textarea id="task-description-textarea" class="task-description-textarea"
                                        name="inputDescription" placeholder="Enter a Description" required></textarea>
                                    <p class="input-required-warning">This field is required</p>
                                </div>
                            </div>

                            <div class="form-div">
                                <span class="form-span">Assigned to</span>
                                <div class="input-div">
                                    <input id="add-contact-input" class="add-contact-input" type="text"
                                        value="Select contacts to assign" required
                                        onclick="toggleDropdown('assignDropdown', 'add-contact-input', 'arrowAssign', 'Select contacts to assign')" />
                                    <img class="arrow-symbol input-symbol" id="arrowAssign"
                                        src="assets/img/Desktop/add_task/arrow_dropdown_down.svg" alt="Pfeil runter"
                                        onclick="toggleDropdown('assignDropdown', 'add-contact-input', 'arrowAssign', 'Select contacts to assign')" />
                                </div>

                                <div class="assignDropdown d-none" id="assignDropdown"></div>
                                <div class="assigned-contacts" id="assigned-contacts"></div>
                            </div>
                        </div>

                        <div class="seperator-vertical"></div>

                        <div class="forms-sides">
                            <div class="form-div">
                                <span class="form-span required-asteriks">Due date</span>
                                <div class="form-subcontainer">

                                    <div class="input-div">
                                        <input id="due-date-input" maxlength="48" class="due-date-input" type="date"
                                            placeholder="dd/mm/yyyy" required />
                                    </div>

                                    <p class="input-required-warning">This field is required</p>

                                </div>
                            </div>

                            <div class="form-div">
                                <span class="form-span">Prio</span>
                                <div class="prio-buttons">
                                    <button type="button" class="prio-btn" id="urgentBtn" onclick="setPrio('urgent')">
                                        Urgent
                                        <img src="./assets/img/Desktop/add_task/priority_icons/urgent.svg"
                                            id="urgentSymbol" />
                                    </button>
                                    <button type="button" class="prio-btn" id="mediumBtn" onclick="setPrio('medium')">
                                        Medium
                                        <img src="./assets/img/Desktop/add_task/priority_icons/medium.svg"
                                            id="mediumSymbol" />
                                    </button>
                                    <button type="button" class="prio-btn" id="lowBtn" onclick="setPrio('low')">
                                        Low
                                        <img src="./assets/img/Desktop/add_task/priority_icons/low.svg"
                                            id="lowSymbol" />
                                    </button>
                                </div>
                            </div>

                            <div class="form-div">
                                <span class="form-span required-asteriks">Category</span>
                                <div class="input-div">
                                    <input onclick="switchVisibility('categoryDropdown')" id="add-category-input"
                                        class="add-category-input" type="text" value="Select task category" required />

                                    <img onclick="switchVisibility('categoryDropdown')"
                                        class="arrow-symbol input-symbol" id="arrowCategory"
                                        src="assets/img/Desktop/add_task/arrow_dropdown_down.svg" alt="Pfeil runter" />
                                </div>
                                <div class="categoryDropdown d-none" id="categoryDropdown"></div>
                            </div>

                            <div class="form-div">
                                <span class="form-span">Subtasks</span>
                                <div class="form-subcontainer">

                                    <div class="input-div" id="subtask-input-div">
                                        <input id="subtask-input" maxlength="48" class="subtask-input" type="text"
                                            placeholder="Add new subtask" onfocus="addFocusClass()" />

                                        <div class="plus-symbol-div" id="plus-symbol-div">
                                            <img class="plus-symbol input-symbol" id="plus-symbol-subtask>"
                                                onclick="addFocusClass()"
                                                src="assets/img/Desktop/add_task/subtasks_icons/add.svg" alt="plus" />
                                        </div>

                                        <div class="create-task-div d-none" id="create-task-div">
                                            <img class="plus-symbol input-symbol" id="close-symbol-subtask>"
                                                onclick="cancelSubtask()"
                                                src="assets/img/Desktop/add_task/subtasks_icons/close.svg"
                                                alt="cancel-symbol" />
                                            <img class="check-symbol input-symbol" id="check-symbol-subtask"
                                                onclick="setSubtask()"
                                                src="assets/img/Desktop/add_task/subtasks_icons/check.svg"
                                                alt="check-symbol" />
                                        </div>





                                    </div>

                                </div>
                                <div id="subTasks" class="subTasks"></div>
                            </div>
                    </section>
                </div>

                <div class="footer-container">
                    <span class="footer-required-field required-asteriks-before">This
                        field is required</span>

                    <div class="footer-btn-container">
                        <button id="clearBtn" type="button" class="addTaskBtn clearBtn" onclick="clearForm(event)">
                            Clear
                            <img src="./assets/img/Desktop/add_task/cancel.svg" alt="weißer Haken" />
                        </button>

                        <button id="createTaskBtn" type="submit" class="addTaskBtn createBtn">
                            Create Task
                            <img src="assets/img/Desktop/add_task/check.svg" alt="weißer Haken" />
                        </button>
                        <div id="okBtnDiv"></div>
                    </div>
                </div>
            </form>

        </div>
    </div>


    <!-- Header template -->
    <div w3-include-html="./assets/templates/desktop_template.html"></div>

    <!-- Content -->
    <div class="content">
        <div class="boardHeader">
            <h2>Board</h2>
            <div class="boardHeaderControll">
                <div class="sortTasks">
                    <input class="searchInput" id="sortTasksInput" placeholder="Find Task">
                    <div onclick="sortAndFilterCards()" class="sortTasksButton">
                        <div class="sortTasksSpacer"></div>
                        <button>
                            <img src=".\assets\img/desktop\board\search\default.svg">
                        </button>
                    </div>
                </div>
                <button class="addTaskButton" onclick="openAddTaskMenu()">
                    <p>Add taks</p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <mask id="mask0_111266_3931" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="32" height="32">
                            <rect width="32" height="32" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_111266_3931)">
                            <path
                                d="M14.666 17.3327H6.66602V14.666H14.666V6.66602H17.3327V14.666H25.3327V17.3327H17.3327V25.3327H14.666V17.3327Z"
                                fill="white" />
                        </g>
                    </svg>
                </button>
            </div>
        </div>

        <div class="toDoList">
            <div>
                <div class="toDoListCategories">
                    <p>To do</p>
                    <a onclick="openAddTaskMenu()"><img src="./assets/img/Desktop/board/plus_button/default.svg"></a>
                </div>
                <div class="listContainer" id="ToDoContainer" ondrop="moveTo('ToDo')"
                    ondragleave="removeHighlight('open')" ondragover="allowDrop(event)">
                </div>
            </div>
            <div>

                <div class="toDoListCategories">
                    <p>In progress</p>
                    <a onclick="openAddTaskMenu()"><img src="./assets/img/Desktop/board/plus_button/default.svg"></a>
                </div>
                <div class="listContainer" id="InProgressContainer" ondrop="moveTo('InProgress')"
                    ondragleave="removeHighlight('open')" ondragover="allowDrop(event)"></div>
            </div>

            <div>
                <div class="toDoListCategories">
                    <p>Await feedback</p>
                    <a onclick="openAddTaskMenu()"><img src="./assets/img/Desktop/board/plus_button/default.svg"></a>
                </div>
                <div class="listContainer" id="AwaitFeedbackContainer" ondrop="moveTo('AwaitFeedback')"
                    ondragleave="removeHighlight('open')" ondragover="allowDrop(event)"></div>
            </div>

            <div>
                <div class="toDoListCategories">
                    <p>Done</p>
                </div>
                <div class="listContainer" id="DoneContainer" ondrop="moveTo('Done')"
                    ondragleave="removeHighlight('open')" ondragover="allowDrop(event)"></div>
            </div>
        </div>
    </div>
</body>

</html>